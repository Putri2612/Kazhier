!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i=e();for(var s in i)("object"==typeof exports?exports:t)[s]=i[s]}}(self,(()=>(()=>{"use strict";var t={};(t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})})(t);class e extends HTMLElement{static observedAttributes=[];requiredAttributes=[];castAttributes=[];availableAttributes=[];constructor(){super(),this.attr={},this.rendered=!1;for(let t of this.getAttributeNames())t in this.constructor.observedAttributes&&this.storeAttribute(t,this.getAttribute(t))}attributeChangedCallback(t,e,i){this._storeAttribute(t,i),this.isConnected&&this.rendered&&this._render()}connectedCallback(){this._render(),this.rendered=!0}_storeAttribute(t,e){t in this.castAttributes?Array.isArray(this.castAttributes[t])?this.castAttributes[t].includes(e)&&(this.attr[t]=e):"object"==this.castAttributes[t]?this.attr[t]=JSON.parse(e):"integer"==this.castAttributes[t]?this.attr[t]=parseInt(e):"boolean"==this.castAttributes[t]&&(this.attr[t]=Boolean(e)):this.attr[t]=e}_validateAttr(){let t="";return this.requiredAttributes.forEach((e=>{e in this.attr||(t+=`${e} is missing; \n                `)})),{error:""!=t,message:t}}_render(){}}const i=e;class s extends i{static data={};static fetching=!1;constructor(){if(super(),!Object.keys(s.data).length&&!s.fetching){s.fetching=!0;let t=window.location.href,e=t.indexOf("/app/"),i=document.documentElement.lang.toLowerCase();e<=0&&(e=t.length),t=t.substring(0,e),t+=`/resources/lang/${i}.json`,fetch(t).then((t=>t.ok?t.json():(t.text().then((t=>console.error(t))),!1))).then((t=>{s.data=t,s.fetching=!1,document.querySelectorAll("tl-str").forEach((t=>{t.refresh()}))})).catch((t=>console.error(t)))}}_render(){let t=this.innerHTML;t in s.data&&(this.innerHTML=s.data[t])}refresh(){this._render()}}const r=s,a=(t,e={})=>{for(const i in e)if(Object.hasOwnProperty.call(e,i)){const s=e[i],r=new RegExp(`{{${i}}}`,"g");t=t.replace(r,s)}return t};return customElements.define("tl-str",r),customElements.define("form-btn",class extends i{static observedAttributes=["method","text","url","type","icon","icon-type"];requiredAttributes=["method","text","url","type"];constructor(){super()}_render(){const t=this._validateAttr();if(t.error)return void console.error(t.message);"button"==this.attr.type?this.className="btn btn-primary":"dropdown-item"==this.attr.type&&this.classList.add("dropdown-item","pe-auto","has-icon");const e=document.createElement("form");if(e.setAttribute("action",this.attr.url),"post"==this.attr.method.toLowerCase()||"put"==this.attr.method.toLowerCase()||"delete"==this.attr.method.toLowerCase()){const t=document.createElement("input"),i=document.createElement("input");t.value=this.attr.method,t.type="hidden",t.name="_method",i.value=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),i.type="hidden",i.name="_token",e.setAttribute("method","POST"),e.append(t),e.append(i)}else e.setAttribute("method","GET");let i="";i="icon"in this.attr&&"icon-type"in this.attr?`<i class="fa-${this.attr["icon-type"]} fa-${this.attr.icon}"></i> ${this.attr.text}`:this.attr.text,this.innerHTML=i,this.append(e),this.addEventListener("click",(t=>{e.submit()}))}}),customElements.define("act-item",class extends i{static observedAttributes=["icon","icon-type","title","details","details-highlight","action-modal","action-modal-title","action-text","action-url","action-method"];requiredAttributes=["icon","icon-type","title","details"];castAttributes=[];constructor(){super()}_render(){const t=this._validateAttr();if(t.error)return void console.error(t.message);let e="",i="";if("action-text"in this.attr&&"action-url"in this.attr)if("action-method"in this.attr)e=a('<form-btn method="{{method}}" text="{{text}}" type="button" url="{{url}}"> </form-btn>',{method:this.attr["action-method"],text:this.attr["action-text"],url:this.attr["action-url"]});else{let t=this.attr["action-url"];"action-modal"in this.attr&&"action-modal-title"in this.attr&&(t="#!",e=`\n                    data-ajax-popup="true"\n                    data-title="${this.attr["action-modal-title"]}"\n                    data-url="${this.attr["action-url"]}"\n                    `),e=a('<a href="{{href}}" class="btn btn-primary btn-action me-1 float-right" {{modal}}> {{text}} </a>',{href:t,text:this.attr["action-text"],modal:e})}"details-highlight"in this.attr&&(i=`<a href="#!">${this.attr["details-highlight"]}</a>`),this.className="activity",this.innerHTML=a('<div class="activity-icon bg-primary text-white shadow-primary"> <i class="fa-{{icon-type}} fa-{{icon}}"></i> </div> <div class="activity-detail"> <div class="mb-2"> <span class="text-job text-primary"> <h6>{{title}}</h6> </span> </div> {{action}} <p>{{details}} {{highlight}}</p> </div>',{"icon-type":this.attr["icon-type"],icon:this.attr.icon,title:this.attr.title,action:e,details:this.attr.details,highlight:i})}}),customElements.define("act-box",class extends i{constructor(){super()}_render(){this.className="activities"}add({icon:t={type:"solid",icon:"ellipsis"},title:e="Title",detail:i="Small details",focus:s=!1,action:r=!1}){const a=document.createElement("act-item");a.setAttribute("icon-type",t.type),a.setAttribute("icon",t.icon),a.setAttribute("title",e),a.setAttribute("details",i),s&&a.setAttribute("details-highlight",s),r&&"object"==typeof r&&(a.setAttribute("action-text",r.text),a.setAttribute("action-url",r.url),"modal"in r&&"object"==typeof r.modal&&(a.setAttribute("action-modal","object"==typeof r.modal),a.setAttribute("action-modal-title",r.modal.title))),this.append(a)}}),customElements.define("stock-change",class extends i{static observedAttributes=["getter","limit"];requiredAttributes=["getter"];castAttributes={limit:"integer"};constructor(){super(),this.page=0,this.gettingData=!1,this.attr={limit:5}}_render(){const t=this._validateAttr();if(t.error)return void console.error(t.message);this.style.maxHeight="70vh";const e=this.act=document.createElement("act-box"),i=this.getBTN=document.createElement("button");i.className="btn btn-outline-primary btn-icon",i.style.borderRadius="50%",i.innerHTML='<i class="fa-solid fa-arrow-down fa-2x"></i>',i.addEventListener("click",(t=>{this._getData()})),this.append(e),this.append(i),this._getData()}_appendAct(t=[]){t.forEach((t=>{const e=t.quantity>0?"plus":"minus",i=((t,e)=>{const i=new Date(t),s=document.documentElement.lang;return new Intl.DateTimeFormat([s,"id"],e).format(i)})(t.date,this._dateStyle);let s="",r=`(${(t=>{const e=document.documentElement.lang;return new Intl.NumberFormat([e,"id"]).format(t)})(t.quantity)}`;if(s="invoice_number"in t?t.invoice_number:"bill_number"in t?t.bill_number:t.description,"product"in t){const e=t.product;"unit"in e&&(r+=` ${e.unit.name}`)}r+=")",this.act.add({icon:{type:"solid",icon:e},title:i,detail:s,focus:r,action:!1})}))}_getData(){if(!this.gettingData){this.gettingData=!0;const t=this.getBTN.querySelector("i"),e=this.page;this.getBTN.disabled=!0,t.classList.remove("fa-arrow-down"),t.classList.add("fa-ellipsis");const i=new FormData;i.append("limit",this.attr.limit),i.append("page",++this.page),i.append("_token",document.querySelector('meta[name="csrf-token"]').getAttribute("content")),fetch(this.attr.getter,{method:"POST",headers:{accept:"application/json"},body:i}).then((t=>t.ok?t.json():(t.json().then((t=>console.error(t.message))),!1))).then((i=>{if(this.getBTN.disabled=!1,t.classList.remove("fa-ellipsis"),t.classList.add("fa-arrow-down"),i)this._dateStyle=i.date,this._maxPage=i.pages,this._appendAct(i.data),this.page==i.pages&&this.removeChild(this.getBTN);else if(e&&(this.page=e),1==this.page||this.page==this._maxPage){this.removeChild(this.getBTN);const t=a('<div class="text-center"> <i class="fa-solid fa-5x fa-box-open text-secondary"></i><br/> <span> <tl-str class="text-secondary">No older history</tl-str> </span> </div>');this.insertAdjacentHTML("beforeend",t)}setTimeout((()=>{this.gettingData=!1}),500)}))}}}),customElements.define("pg-cell",class extends i{static observedAttributes=["heading","renderable"];requiredAttributes=[];castAttributes={heading:"boolean",renderable:"boolean"};constructor(){super()}_render(){if(this.attr.renderable){const t=this.innerHTML;let e;e=this.attr.heading?`<th>${t}</th>`:`<td>${t}</td>`,this.outerHTML=outer}}}),customElements.define("pg-row",class extends i{static observedAttributes=["type","renderable"];requiredAttributes=["type"];castAttributes={type:["heading","data"],renderable:"boolean"};constructor(){super(),this._dataIsSet=!1}set data(t){this._dataIsSet=!0,this._data="string"==typeof t?JSON.parse(t):t,this._render()}_render(){if(this.attr.renderable){const t=this._validateAttr();if(t.error)return void console.error(t.message);let e;if("heading"==this.attr.type)this.querySelectorAll("pg-cell").forEach((t=>{t.setAttribute("heading",!0),t.setAttribute("renderable",!0)})),e=this.innerHTML;else if(this._dataIsSet)if(this._data)this.querySelectorAll("pg-cell").forEach((t=>{const e=t.innerHTML.match(/{(\w+)}/g);e&&e.forEach((e=>{e in this._data&&(t.innerHTML=t.innerHTML.replace(/{(\w+)}/g,this._data[$1]))})),t.setAttribute("renderable",!0)})),e=this.innerHTML;else{const t=this.querySelectorAll("pg-cell").length;e=a('<td colspan="{{colspan}}"> <tl-str>No Data</tl-str> </td>',{colspan:t})}this.outerHTML=`<tr>${e}</tr>`}}}),customElements.define("pg-header",class extends i{static observedAttributes=[];requiredAttributes=[];castAttributes={};constructor(){super()}_render(){this.querySelectorAll("pg-row").forEach((t=>{t.setAttribute("type","heading"),t.setAttribute("renderable",!0)})),this.outerHTML=`<thead>${this.innerHTML}</thead>`}}),t})()));